/**
 * @name vrs.js
 * @version v33
 * @Date Fri May 08 2015 10:19:42 GMT-0400 (EDT)
 */
!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t){"use strict";var n={};n.np=function(){return e("../cache").hasCookies?e("../utils/cookies").getItem("__vrid"):null},n.cookie=function(){return e("../utils/cookies").getItem("__vrf")},n.zones=function(){return e("../utils/zones").getAll()},n.contentTypes=function(t){return e("../utils/typecat").contentTypes(t)},n.contentCategories=function(t){return e("../utils/typecat").contentCategories(t)},n.authors=function(t){return e("../utils/authors").getAuthors(t)},n.domain=function(e){e=e||document.location.hostname;var t=null,n={"co.uk":1,"co.il":1,"co.in":1,"co.ke":1,"co.ug":1,"com.my":1,"com.au":1,"com.br":1},r=e.split(".");return r.length>=2&&(t=r.slice(-2).join("."),n[t]&&(t=r.slice(-3).join("."))),t},n.charset=function(){return e("../utils/dom").getCharset()||"UTF-8"},n.trackURL=function(t,n,r){return t=t||e("../utils/dom").getProperty("vr:canonical"),t&&t.content?e("../utils/url").absolute(t.content):(n=n||e("../utils/dom").getHeader("link","rel","canonical"),n&&n.href?e("../utils/url").absolute(n.href):(r=r||e("../utils/dom").getProperty("og:url"),r&&r.content?e("../utils/url").absolute(r.content):document.location.href))},n.refURL=function(t,n){return n=n||e("../cache"),t||(t=document.referrer),n.metaRefreshedVisit()&&(t=n.trackURL()),t},n.metaRefreshedVisit=function(t,n,r){var o;return t=t||e("../cache"),t.hasCookies?(n=n||e("../utils/dom").getHeader("meta","http-equiv","refresh"),n&&n.content&&(r=r||decodeURIComponent(e("../utils/cookies").getItem("__vrrefresh")),o=parseInt(n.content.split(";")[0],10),o=Math.round(o/60*100)/100+.1,e("../utils/cookies").setItem("__vrrefresh",encodeURIComponent(t.trackURL()),o,t.domain),r===t.trackURL())?!0:!1):!1},t.exports=n},{"../cache":2,"../utils/authors":15,"../utils/cookies":17,"../utils/dom":20,"../utils/typecat":32,"../utils/url":33,"../utils/zones":35}],2:[function(e,t){"use strict";var n=e("./property"),r=e("./getters"),o=function(){this.np=new n(r.np),this.hasCookies=new n(null,!0),this.automate=new n(null,!1),this.charset=new n(r.charset),this.cookie=new n(r.cookie),this.domain=new n(r.domain),this.trackURL=new n(r.trackURL),this.refURL=new n(r.refURL),this.metaRefreshedVisit=new n(r.metaRefreshedVisit),this.zones=new n(r.zones,{}),this.contentTypes=new n(r.contentTypes),this.contentCategories=new n(r.contentCategories),this.authors=new n(r.authors)};o.prototype.init=function(){this.cookie(),this.domain()},t.exports=new o},{"./getters":1,"./property":3}],3:[function(e,t){"use strict";var n=function(e,t){var n=this;return n.value=t||null,function(t,r){return t?n.cache(t):!e||t||n.value&&!r||n.cache(e()),n.value}};n.prototype.cache=function(e){this.value=e},t.exports=n},{}],4:[function(e,t){"use strict";var n=e("../utils/objects");t.exports=n.extend(e("./production"),e("./shared"))},{"../utils/objects":27,"./production":5,"./shared":6}],5:[function(e,t){"use strict";t.exports={environment:"production",logLimit:35}},{}],6:[function(e,t){"use strict";t.exports={trackingServer:"//vrt.outbrain.com/",trackingServerError:"//vrt.outbrain.com/error/",trackingServerVideo:"//vrt.outbrain.com/video/",recoveryTrackingServers:["//vrt-nydc1-only.outbrain.com","//vrt-chidc2-only.outbrain.com"],recoveryServingServers:["//vrp-nydc1-only.outbrain.com","//vrp-chidc2-only.outbrain.com"],servingServer:"//vrp.outbrain.com/",thirdparty:{revee:{whitelist:[1024],script:"http://revee-staging-js.s3.amazonaws.com/analytics-v1.js"}}}},{}],7:[function(e,t){"use strict";var n={};n.TYPE_LIMIT=2,n.TYPE_CHAR_LIMIT=20,n.CATEGORY_LIMIT=5,n.CATEGORY_CHAR_LIMIT=20,t.exports=n},{}],8:[function(e){"use strict";window._vrtrack=function(){},window._vrq=window._vrq||[];{var t=e("./cache"),n=e("./utils/cookies"),r=e("./utils/log");e("./utils/events"),e("./utils/thirdparty")}window.cache=t,r("Loaded and initialized"),e("./utils/time").start(),t.init(),window._vrtrack=e("./track/impression").manual,window._vrq.run=e("./vrq").run,window._vrq.stop=e("./vrq").stop,window._vrq.jsonp=e("./vrq").jsonp,window._vrdebug=r.prototype,window._vrq.run(),t.hasCookies()&&!t.cookie()&&n.setItem("__vrf",e("./utils/hash").generate(),30,"/",t.domain()),e("./utils/dom").onReadyByTag("body",function(){t.trackURL(),t.charset(),t.zones(),e("./track/impression").ping({refURL:n.getItem("__vru")||t.refURL(),seenURL:document.location.href}),e("./serve/tasks").get(function(t){e("./serve/tasks").run(t)})}),e("./track/click").attachEventListeners()},{"./cache":2,"./serve/tasks":12,"./track/click":13,"./track/impression":14,"./utils/cookies":17,"./utils/dom":20,"./utils/events":21,"./utils/hash":22,"./utils/log":25,"./utils/thirdparty":30,"./utils/time":31,"./vrq":38}],9:[function(e,t){"use strict";var n={};n.impression=function(t){t=t||{};var n="?idsite="+t.np;return n+="&url="+t.trackURL,n+="&seen_url="+t.seenURL,n+="&t="+t.title,n+="&c="+t.cookie,n+="&r="+t.timestamp,n+="&ypos="+t.yPos,n+="&zone="+t.zone,n+="&debug="+t.debug,t.refURL&&(n+="&refurl="+t.refURL),t.refNP&&(n+="&refnp="+t.refNP),t.normRefURL&&(n+="&norm_refurl="+t.normRefURL),t.conversionID&&(n+="&cv_id="+t.conversionID),t.contentType&&(n+="&content_type="+t.contentType),t.noCookies&&(n+="&no_cookies=true"),t.manualPing&&(n+="&man=true"),t.contentTypes&&(n+="&vr_types="+t.contentTypes),t.contentCategories&&(n+="&vr_categories="+t.contentCategories),t.authors&&(n+="&authors="+t.authors),t.trackingEvent&&(n+="&tracking_event="+t.trackingEvent),t.transport&&(n+="&transport="+t.transport),t.mx&&(n+="&mx="+t.mx,n+="&my="+t.my,n+="&sw="+t.sw),n+="&v="+e("../version")},n.error=function(t){t=t||{};var n="?idsite="+t.np;return n+="&url="+t.url,n+="&msg="+t.msg,n+="&line_number="+t.lineNumber,n+="&v="+e("../version")},n.video=function(e){e=e||{};var t="?idsite="+e.np;return t+="&v_id="+e.id,t+="&url="+e.trackURL,t+="&cat="+e.cat,t+="&c="+e.cookie,t+="&r="+e.timestamp,t+="&v="+e.version,t+="&o="+e.offset,t+="&t="+e.title,t+="&a="+e.action,t+="&length="+e.length,t+="&player="+e.player,t+="&refURL="+e.refURL},t.exports=n},{"../version":36}],10:[function(e,t){"use strict";var n={};n.run=function(t){e("../utils/log")("Automating "+t.length+" module(s)");for(var r=0,o=t.length;o>r;r++)n.paint(t[r])},n.paint=function(t){var n,r=30,o=100;if(t.config.manip_test&&"#vr-test-modules"!=e("../utils/url").hash())return!1;var i=function(){return(n=e("../cache").zones(null,!0)[t.config.container_zone])?(n.innerHTML=t.served_html,e("../utils/log")("Container zone found, loading module"),void 0):r>0?(r--,e("../utils/log")("Container zone found, loading module"),setTimeout(i,o),void 0):(e("../utils/log")('data-vr-zone "'+t.config.container_zone+'" was not found on the page'),void 0)};return i()},t.exports=n},{"../cache":2,"../utils/log":25,"../utils/url":33}],11:[function(e,t){"use strict";var n=e("../utils/string"),r={};r.run=function(t){e("../utils/log")("Doing "+t.length+" module(s)");for(var n=(e("../cache").zones(),r.splitTraffic(e("../utils/cookies").getItem("__vrf"),2)),o=0,i=t.length;i>o;o++)r.start(t[o],n)},r.start=function(t,n){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");e("../utils/log")("Cookie Split: "+o[n]);var i,s=20,a=100,c=function(){i=e("../cache").zones(null,!0)[t.config.data_vr_zone];{if(!i)return s>0?(s--,e("../utils/log")("Tries left to find zone: "+s),setTimeout(c,a),void 0):(e("../utils/log")('data-vr-zone "'+t.config.data_vr_zone+'" was not found on the page'),void 0);var o=t.content.new_titles[n],u=t.content.current_title,l=t.content.new_images[n],d=t.content.current_image,f=[];t.config.winner&&(o=t.config.winner.title,l=t.config.winner.image,e("../utils/log")("A winner was sent, so use that instead"));for(var p in e("../cache").zones())if(p===t.config.data_vr_zone&&e("../cache").zones().hasOwnProperty(p))for(var m=0;m<e("../cache").zones()[p].length&&(f.push(r.replaceImage(d,l,e("../cache").zones()[p][m],!1)),f.push(r.replaceTitle(u,o,e("../cache").zones()[p][m],!1)),!f[0]&&!f[1]);m++);}};return c()},r.replaceTitle=function(t,r,o){var i,s,a,c=!1,u=50,l=100,d=n.strip(e("../utils/html").decodeEntities(t)).toLowerCase();if(!r||t===r)return e("../utils/log")("Goal title is current title, do nothing"),!1;e("../utils/log")("Searching for headline: "+t);var f=function(){i=o.getElementsByTagName("a");for(var p,m=0,h=i.length;h>m;m++)p=i[m].innerHTML,n.trim(p).length>=n.trim(t).length&&(p=n.strip(e("../utils/html").decodeEntities(p)).toLowerCase(),p===d&&(c=!0,i[m].innerHTML=r,e("../utils/log")("Headline found and replaced (anchor value)")));if(!c)for(m=0;h>m;m++){s=i[m].getElementsByTagName("*");for(var g=-1,v=s.length;++g<v;)a=s[g].innerHTML,a.length>=t.length/2&&(a=n.strip(e("../utils/html").decodeEntities(a)).toLowerCase(),a===d&&(c=!0,s[g].innerHTML=r,e("../utils/log")("Headline found and replaced (child value)")))}return c?c:u>0?(u--,e("../utils/log")("Tries left to find headline: "+u),setTimeout(f,l),void 0):(e("../utils/log")("Headline not found in zone"),!1)};return f()},r.replaceImage=function(t,n,r){var o,i,s=!1,a=50,c=100;if(!n||t===n)return e("../utils/log")("Goal image is current image, do nothing"),!1;e("../utils/log")("Searching for image: "+t);var u=function(){o=r.getElementsByTagName("img");for(var l=0,d=o.length;d>l;l++)if(i=o[l].src,i===t||i===decodeURI(t))return s=!0,o[l].src=decodeURI(n),e("../utils/log")("Image found and replaced"),!0;return a>0?(a--,e("../utils/log")("Tries left to find image: "+a),setTimeout(u,c),void 0):(e("../utils/log")("Image not found in zone"),!1)};return u()},r.splitTraffic=function(e,t){if(!e)return 0;for(var n=0,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o=e.substr(-t,t),i=o.length,s=0;i>s;s++)n=n+r.indexOf(o.charAt(s))+1;return n%t},t.exports=r},{"../cache":2,"../utils/cookies":17,"../utils/html":23,"../utils/log":25,"../utils/string":29}],12:[function(e,t){"use strict";var n=e("../utils/log"),r=(e("../utils/url"),e("../utils/script")),o=e("../utils/cors"),i=e("../cache"),s=e("../config"),a=s.servingServer,c={};c.get=function(e){o.isCors?(n("Get serving tasks (cors)"),c.corsTasks(c.run)):(n("Get serving tasks (jsonp)"),c.jsonpTasks(c.run)),e([])},c.jsonpTasks=function(t){var n=a+c.getQueryString("jsonp"),o="callbackFn";return n+="&callback=_vrq.jsonp."+o,e("../vrq").jsonp[o]=t,r.load(n,{async:!0,id:"vr-script-002"}),n},c.corsTasks=function(t){var r=a+c.getQueryString("jsonp"),i="callbackFn";return r+="&callback=_vrq.jsonp."+i,e("../vrq").jsonp[i]=t,o.request({method:"GET",url:r,headers:{Accept:"application/json"},timeout:2e3,load:function(){try{new Function(this.responseText)(),n("serve corsRequest loaded "+JSON.stringify(this))}catch(e){n("serve corsRequest responseText failed when being invoked "+e)}},error:function(){n("serve corsRequest failed "+JSON.stringify(this))}}),r},c.getQueryString=function(e){var t="?transport="+e;return t+="&idsite="+i.np(),t+="&url="+i.trackURL(),t+="&content_type="+i.charset()},c.run=function(t){for(var n=[],r=[],o=0;o<t.length;o++)"content_test"===t[o].type?n.push(t[o]):"automation_module"===t[o].type&&r.push(t[o]);e("./automation").run(r),e("./headline").run(n)},t.exports=c},{"../cache":2,"../config":4,"../utils/cors":18,"../utils/log":25,"../utils/script":28,"../utils/url":33,"../vrq":38,"./automation":10,"./headline":11}],13:[function(e,t){"use strict";var n=e("../cache"),r=e("../utils/events"),o=e("../utils/cookies"),i=e("../utils/node"),s=e("../utils/y-pos"),a=.6,c={};c.activeNode=null;var u=document.getElementsByTagName("a"),l=c.onMousedownFn=function(e,t){var r=i.getParent(t,i.isAnchor);if(r){var l=s.indexOf(u,r),d=i.getParent(r,i.isZone);o.setItem("__vrl",encodeURIComponent(r.href),a,"/",n.domain()),o.setItem("__vry",l,a,"/",n.domain()),d&&d.getAttribute&&o.setItem("__vrz",encodeURIComponent(d.getAttribute("data-vr-zone")),a,"/",n.domain()),o.setItem("__vru",encodeURIComponent(n.trackURL()),a,"/",n.domain()),o.hasItem("__vrrefresh")&&o.removeItem("__vrrefresh","/",n.domain()),o.setItem("__vrid",n.np(),a,"/",n.domain()),c.activeNode=t}else o.removeItem("__vrl","/",n.domain()),o.removeItem("__vry","/",n.domain()),o.removeItem("__vrz","/",n.domain());var f,p,m;e.pageX||e.pageY?(f=e.pageX,p=e.pageY):(e.clientX||e.clientY)&&(f=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,p=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),f&&(m=document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth,o.setItem("__vrm",f+"_"+p+"_"+m,a,"/",n.domain()))},d=c.onMouseupFn=function(e,t){c.activeNode&&t!==c.activeNode&&(o.removeItem("__vrl","/",n.domain()),o.removeItem("__vry","/",n.domain()),o.removeItem("__vrm","/",n.domain()),o.removeItem("__vrz","/",n.domain())),c.activeNode=null},f=c.onUnloadFn=function(){o.setItem("__vru",encodeURIComponent(n.trackURL()),a,"/",n.domain())};c.attachEventListeners=function(){n.hasCookies()&&(r.attach(document,"mousedown",l),r.attach(document,"mouseup",d),r.attach(window,"unload",f))},t.exports=c},{"../cache":2,"../utils/cookies":17,"../utils/events":21,"../utils/node":26,"../utils/y-pos":34}],14:[function(e,t){"use strict";var n=e("../cache"),r=e("../utils/cookies"),o=e("../utils/time"),i=e("../utils/url"),s=e("../utils/image"),a=e("../utils/document"),c=e("../utils/cors"),u=e("../utils/log"),l=e("../mappers/ping"),d=e("../config"),f=d.trackingServer,p={};p.ping=function(t){n.np(t.np),n.trackURL(t.trackURL);var s,u=encodeURIComponent(a.title()),d=t.conversionID,m=r.getItem("__vry")||-1,h=r.getItem("__vrz")||"",g=r.getItem("__vrid"),v=t.refURL,_=null,y=null,k={};if(t.manualPing?_=v:r.hasItem("__vru")&&(_=decodeURIComponent(r.getItem("__vru"))),y=r.hasItem("__vrl")?decodeURIComponent(r.getItem("__vrl")):t.seenURL||n.trackURL(),r.hasItem("__vrm")){var I=r.getItem("__vrm").split("_");k.x=I[0],k.y=I[1],k.screen_width=I[2]}return s=l.impression({trackURL:i.encode(n.trackURL()),seenURL:i.encode(y),refURL:v,normRefURL:i.encode(_),np:n.np(),refNP:g,title:u,cookie:r.getItem("__vrf"),debug:"loadTime."+(o.now()-o._startTime),timestamp:o.now().getTime(),yPos:m,zone:i.encode(h),conversionID:d,contentType:n.charset(),mx:k.x,my:k.y,sw:k.screen_width,contentTypes:n.contentTypes(),contentCategories:n.contentCategories(),authors:n.authors(),noCookies:!n.hasCookies(),manualPing:t.manualPing,trackingEvent:"tracking",transport:c.isCors&&"cors"||"beacon"}),c.isCors?e("../utils/collections").each([f],function(e){p.loadCors(e,s)}):p.loadImage(s),r.hasItem("__vrl")&&r.removeItem("__vrl","/",n.domain()),f+s},p.loadImage=function(e){s.loadResource(f+e)},p.loadCors=function(e,t){c.request({method:"GET",url:e+t,headers:{Accept:"application/json"},timeout:1e4,load:function(){u("track corsRequest loaded "+JSON.stringify(this))},error:function(){u("track corsRequest failed "+JSON.stringify(this))}})},p.manual=function(e){e=e||{};var t=e.refurl?e.refurl:r.getItem("__vru")||n.trackURL();return p.ping({automate:!!e.automate,conversionID:e.conversion_id,manualPing:!0,refURL:t,trackID:e.track_id,trackURL:e.track_url})},t.exports=p},{"../cache":2,"../config":4,"../mappers/ping":9,"../utils/collections":16,"../utils/cookies":17,"../utils/cors":18,"../utils/document":19,"../utils/image":24,"../utils/log":25,"../utils/time":31,"../utils/url":33}],15:[function(e,t){"use strict";var n={},r=e("./string");n._extractAuthors=function(e,t){for(var n="",o=0;o<e.length;o++)for(var i=t(e[o]),s=i.split(","),a=0;a<s.length;a++)s[a].length>0&&(n+=r.trim(s[a])+",");return n.slice(0,-1)},n.getAuthors=function(t){var r=e("./dom"),o=function(e){return e.content},i=function(e){return e.textContent},s=function(t){return e("./url").parse(t.content).pathname.split("/").pop()},a=function(){return n._extractAuthors(r.getAllProperties("vr:author"),o)||n._extractAuthors(r.getAllProperties("author"),o)||n._extractAuthors(r.getAllHeaders("a","rel","author"),i)||n._extractAuthors(r.getAllProperties("article:author"),s)||""};return t||a()},t.exports=n},{"./dom":20,"./string":29,"./url":33}],16:[function(e,t){"use strict";var n={},r={};n.nativeForEach=function(){return Array.prototype&&Array.prototype.forEach||!1},n.each=function(t,o,i){if(null!==t)if(t.forEach===n.nativeForEach())t.forEach(o,i);else if(t.length===+t.length){for(var s=0,a=t.length;a>s;s++)if(o.call(i,t[s],s,t)===r)return}else for(var c in t)if(e("./objects").has(t,c)&&o.call(i,t[c],c,t)===r)return},t.exports=n},{"./objects":27}],17:[function(e,t){"use strict";var n={getItem:function(e,t){return t=t||document.cookie,decodeURIComponent(t.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,r,o,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(n)switch(n.constructor){case Number:var a=new Date;a.setTime(a.getTime()+60*n*1e3),s=1/0===n?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; expires="+a.toUTCString();break;case String:s="; expires="+n;break;case Date:s="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(o?"; domain="+o:"")+(r?"; path="+r:"")+(i?"; secure":""),!0},removeItem:function(e,t,n,r){return r=r||document.cookie,e&&this.hasItem(e,r)?(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0):!1},hasItem:function(e,t){return t=t||document.cookie,new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(t)},keys:function(e){e=e||document.cookie;for(var t=e.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),n=0;n<t.length;n++)t[n]=decodeURIComponent(t[n]);return t}};t.exports=n},{}],18:[function(e,t){"use strict";var n=e("./collections"),r=e("./objects"),o=e("./log"),i={},s=window.XMLHttpRequest,a=function(){};i.isCors=!!s&&"withCredentials"in new s,i.request=function(e){e=e||{},e=r.extend({method:"GET",data:null,load:a,error:a},e);var t,i=this,s=i.xhr();s.open(e.method,e.url,!0),e.headers&&n.each(e.headers,function(e,t){s.setRequestHeader(t,e)}),e.withCredentials&&(s.withCredentials=!0),s.onload=function(){"number"==typeof t&&clearTimeout(t),e.load.apply(this,arguments)},s.onerror=e.error;try{s.send(e.data)}catch(c){o(c)}return"number"==typeof e.timeout&&(t=setTimeout(function(){s.abort()},e.timeout)),s},i.xhr=function(){return new XMLHttpRequest},t.exports=i},{"./collections":16,"./log":25,"./objects":27}],19:[function(e,t){"use strict";var n={};n.title=function(){return document.title},t.exports=n},{}],20:[function(e,t){"use strict";var n={};n.onReadyByTag=function(e,t){var r,o=50;if(document.getElementsByTagName&&setTimeout){var i=document.getElementsByTagName(e);i&&i.length&&i.length>0?(clearTimeout(r),t()):r=setTimeout(function(){n.onReadyByTag(e,t)},o)}},n.getAllHeaders=function(e,t,n,r){n=n||"";var o=[],i=document.getElementsByTagName("head");if(i)for(var s=0,a=i.length;a>s;s++){var c=i[s].getElementsByTagName(e);if(c)for(var u=0,l=c.length;l>u;u++)if(c[u].getAttribute(t)&&(!n||n==c[u].getAttribute(t).toLowerCase())&&(o.push(c[u]),r))return o}return o},n.getHeader=function(e,t,r){return n.getAllHeaders(e,t,r,!0).pop()||null},n.getProperty=function(e){return n.getHeader("meta","property",e)||n.getHeader("meta","name",e)},n.getAllProperties=function(e){return n.getAllHeaders("meta","property",e).concat(n.getAllHeaders("meta","name",e))},n.getCharset=function(){var e,t=n.getHeader("meta","http-equiv","content-type");return t?(e=t.content.split("charset=")[1],e&&(e=e.split(";")[0]),e||(e=t.content.split(";")[1],e||(e=t.content))):(t=n.getHeader("meta","charset",null),t&&(e=t.getAttribute("charset"))),e},t.exports=n},{}],21:[function(e,t){"use strict";var n={};n.attach=function(e,t,n){var r=function(e){e=e||event,n.apply(document,[e,e.target||e.srcElement])};document.addEventListener?e.addEventListener(t,r,!1):document.attachEvent&&e.attachEvent("on"+t,r)},n.debounce=function(e,t){var n;return function(r){var o=this,i=arguments,s=function(){r||e.apply(o,i),n=null};n&&clearTimeout(n),r&&e.apply(o,i),n=setTimeout(s,t||100)}},t.exports=n},{}],22:[function(e,t){"use strict";var n={};n.generate=function(){var e,t,n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),r=(new Date).getTime().toString();for(t=0;32>t;t++)e=Math.floor(62*Math.random()),r+=n[e];return r},t.exports=n},{}],23:[function(e,t){"use strict";var n={};n.decodeEntities=function(){function e(e){return e&&"string"==typeof e&&(e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),t.innerHTML=e,t.innerText?(e=t.innerText,t.innerText=""):(e=t.textContent,t.textContent="")),unescape(e)}var t=document.createElement("div");return e}(),t.exports=n},{}],24:[function(e,t){"use strict";var n={};n.loadResource=function(e){var t=new Image(1,1);return t.src=e,t},t.exports=n},{}],25:[function(e,t){"use strict";function n(){var e=Array.prototype.slice.apply(arguments),t=new Date;return function(){var n="VRS version: ["+o+"] ";n+=(t.getMinutes()>9?t.getMinutes():"0"+t.getMinutes())+":",n+=(t.getSeconds()>9?t.getSeconds():"0"+t.getSeconds())+".",n+=t.getMilliseconds()>9?t.getMilliseconds()>99?t.getMilliseconds():"0"+t.getMilliseconds():"00"+t.getMilliseconds(),e.unshift(n),console.log(e.join(" "))}}function r(){return this instanceof r?(i.logLimit<=this.queue.length||this.queue.push(n.apply(null,arguments[0])),void 0):new r(arguments)}var o=e("../version"),i=e("../config");r.prototype.queue=[],r.prototype.run=function(){for(var e;e=this.queue.shift();)e()},t.exports=r},{"../config":4,"../version":36}],26:[function(e,t){"use strict";var n={};n.isAnchor=function(e){return e&&e.tagName&&"a"===e.tagName.toLowerCase()},n.isZone=function(e){return e&&e.getAttribute&&!!e.getAttribute("data-vr-zone")},n.getParent=function(e,t,n){n=n||25;for(var r=null;e&&n--;)t(e)&&(r=e),e=e.parentNode;return r},t.exports=n},{}],27:[function(e,t){"use strict";var n={},r=Array.prototype,o=Object.prototype,i=r.slice,s=o.toString;n.extend=function(t){return e("./collections").each(i.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},n.has=function(e,t){return hasOwnProperty.call(e,t)},n.is=function(e,t){return s.call(e)==="[object "+t+"]"},t.exports=n},{"./collections":16}],28:[function(e,t){"use strict";var n={};n.load=function(e,t){t.id&&n.remove(t.id);var r=document.createElement("script"),o=document.getElementsByTagName("script")[0];if(r.src=e,t.id&&(r.id=t.id),t.async&&(r.async=!0),t.onload){var i=!1;r.onload=r.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,t.onload(),r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r))}}o.parentNode.insertBefore(r,o)},n.remove=function(e){var t=document.getElementById(e);if(t){t.parentNode.removeChild(t);try{for(var n in t)delete t[n]}catch(r){}}},t.exports=n},{}],29:[function(e,t){"use strict";var n={};n.strip=function(e){return e.replace(/\s/g,"")},n.trim=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},t.exports=n},{}],30:[function(e,t){"use strict";var n=e("../cache"),r=e("../utils/script"),o=e("../config").thirdparty,i={};i.load=function(e,t){var i=o[e];if(!i||!i.script)return!1;var s=n.np(),a={id:"vr-script-"+e,async:!0};t&&(a.onload=t);for(var c=0,u=i.whitelist,l=u.length;l>c;c++)if(s===u[c])return r.load(i.script,a),!0;return!1},i.config=o,t.exports=i},{"../cache":2,"../config":4,"../utils/script":28}],31:[function(e,t){"use strict";var n={};n._startTime=null,n.start=function(){n._startTime=n.now()},n.now=function(){return new Date},t.exports=n},{}],32:[function(e,t){"use strict";var n=e("./string"),r=e("../constants/typecat"),o=e("./log"),i={};i.extractTypeCat=function(e,t){var r="",i=0;e:for(var s=0,a=e.length;a>s;s++)for(var c=e[s].content.split(","),u=0,l=c.length;l>u;u++){var d=c[u],f=d.length,p=t.LIMIT&&t.LIMIT<=i,m=t.CHAR_LIMIT&&t.CHAR_LIMIT<f;if(0!==f&&!m){if(p){o("typecat has exceeded "+t.LIMIT);break e}i++,r+=n.trim(d)+","}}return r.slice(0,-1)},i.sanitize=function(e){return e.toLowerCase()},i.contentTypes=function(t){return t=t||i.extractTypeCat(e("./dom").getAllProperties("vr:type"),{LIMIT:r.TYPE_LIMIT,CHAR_LIMIT:r.TYPE_CHAR_LIMIT}),i.sanitize(t)},i.contentCategories=function(t){return t=t||i.extractTypeCat(e("./dom").getAllProperties("vr:category"),{LIMIT:r.CATEGORY_LIMIT,CHAR_LIMIT:r.CATEGORY_CHAR_LIMIT}),i.sanitize(t)},t.exports=i},{"../constants/typecat":7,"./dom":20,"./log":25,"./string":29}],33:[function(e,t){"use strict";var n={};n.serialize=function(e,t){var r,o,i=[];for(var s in e)e.hasOwnProperty(s)&&(r=t?t+"["+s+"]":s,o=e[s],i.push("object"==typeof o?n.serialize(o,r):encodeURIComponent(r)+"="+encodeURIComponent(o)));return i.join("&")},n.encode=function(e){if(!e)return e;var t,n=[];for(t=0;t<e.length;t++)e.charCodeAt(t)<128?n.push(e.charAt(t)):n.push(encodeURIComponent(e.charAt(t)));return encodeURIComponent(n.join(""))},n.absolute=function(e){var t=/^http(?:s)?:\/\//;if(-1!=e.search(t))return e;var r=document.createElement("div");return r.innerHTML='<a href="'+n.escapeURL(e)+'">x</a>',r.firstChild.href},n.escapeURL=function(e){return e.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/\"/g,"&quot;")},n.hash=function(){return window.location.hash},n.parse=function(e){e=e||"";var t=document.createElement("a");return t.href=e,{protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash}},t.exports=n},{}],34:[function(e,t){"use strict";var n={};n.indexOf=function(e,t){if(!t||null===e)return-1;var n,r,o=-1;for(n=0,r=e.length;r>n;n++)if(e[n].href===t.href&&(o+=1),e[n]===t)return o;return-1},t.exports=n},{}],35:[function(e,t){"use strict";var n={};n.getAll=function(){var e,t,n,r={},o=0;if(document.querySelectorAll){for(e=document.querySelectorAll("*[data-vr-zone]"),n=e.length;n>o;o++)t=e[o].getAttribute("data-vr-zone"),r[t]?r[t].push(e[o]):r[t]=[e[o]];return r}var i=document.all;for(n=i.length;n>o;o++)t=i[o].getAttribute("data-vr-zone"),t&&(r[t]?r[t].push(i[o]):r[t]=[i[o]]);return r},t.exports=n},{}],36:[function(e,t){"use strict";t.exports=33},{}],37:[function(e,t){"use strict";var n=e("../cache"),r=e("../mappers/ping"),o=e("../utils/cookies"),i=e("../utils/image"),s=e("../config").trackingServerVideo,a={};a._tracker={cache:{},get:function(e){return this.cache[e]||(this.cache[e]=new u(e)),this.cache[e]}},a.heartRate=function(){return 3e3};var c=function(t,i){return r.video({np:n.np(),id:t.id,trackURL:n.trackURL(),cat:t.categories.join(","),cookie:n.cookie(),timestamp:e("../utils/time").now().getTime(),version:e("../version"),offset:t.offset,title:t.title,action:i,length:t.length,player:t.player,refURL:o.getItem("__vru")||n.refURL(),trackingEvent:"video"})},u=function(e,t){t=t||{},this.id=e,this.categories=t.categories||[],this.offset=t.offset||"",this.title=t.title||"",this.length=t.length||"",this.player=t.player||""};u.prototype.impression=function(){i.loadResource(s+c(this,"impression"))},u.prototype.play=function(){i.loadResource(s+c(this,"play")),this._startHeartbeat()},u.prototype._startHeartbeat=function(){var e=this;this.pulse=setInterval(function(){i.loadResource(s+c(e,"impression"))},a.heartRate())},u.prototype._killHeartbeat=function(){clearInterval(this.pulse)},t.exports=a},{"../cache":2,"../config":4,"../mappers/ping":9,"../utils/cookies":17,"../utils/image":24,"../utils/time":31,"../version":36}],38:[function(e,t){"use strict";var n={},r=null,o=-1;n.run=function(){var t=window._vrq.length,n=e("./cache");for(r&&(clearTimeout(r),r=null);o!==t&&t--;)switch(window._vrq[t][0]){case"id":n.np(parseInt(window._vrq[t][1],10));break;case"automate":n.automate(!!window._vrq[t][1]);break;case"charset":n.charset(window._vrq[t][1]);break;case"track_url":n.trackURL(window._vrq[t][1]);break;case"no_cookies":n.hasCookies(!window._vrq[t][1]);break;default:e("./utils/log")("default vrq config",window._vrq[t][0])}o=window._vrq.length,r=setTimeout(window._vrq.run,1e3)},n.stop=function(){clearTimeout(r),e("./utils/collections").each(e("./video/api")._tracker.cache,function(e){e._killHeartbeat()})},n.jsonp={},t.exports=n},{"./cache":2,"./utils/collections":16,"./utils/log":25,"./video/api":37}]},{},[8]);