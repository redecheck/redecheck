function twttrWidgetTweetButtonClickHandler(e){"use strict";if(e&&"function"==typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: twitter"}}})}catch(t){}}function initAnalytics(){"use strict";var e=CNN.Analytics.utils;e.addMetadataObject(),e.jsmdTracking(),e.addTrackingTags(document),e.addSocialMediaInteractionMetrics(),CNN.Gallery.analytics.init(document),jQuery(document).on("jumbotron-initialization-complete",CNN.Gallery.analytics.initJumbotronTracking)}var CNN=window.CNN||{},timeout;CNN.Analytics=CNN.Analytics||{},CNN.Analytics.utils=function(){"use strict";function e(){var e=CNN.CurrentWidth.getClientWidth(),t=640,n=960,a=1120,i="no value set";return i=e>=a?"14col":a>e&&e>=n?"12col":n>e&&e>=t?"8col":"4col"}function t(e){var t={};return t.section="section front",t.special="specials",t.videos="video","string"==typeof e&&e in t&&(e=t[e]),"undefined"==typeof CNN.contentModel||"undefined"==typeof CNN.contentModel.sectionName||"homepage"!==CNN.contentModel.sectionName&&"intl_homepage"!==CNN.contentModel.sectionName||(e="index"),e}function n(e,t,n){var a=e.split(";"),i=0;for(t="string"==typeof t&&t.length>0?";expires="+t:"",n="string"==typeof n&&n.length>0?";path="+n:";path=/";i<a.length;i++)document.cookie=a[i]+n+t+";"}function a(e,t){e.currentTarget.offsetParent.attributes.hasOwnProperty("data-analytics")&&n(t),e.currentTarget.attributes.hasOwnProperty("data-vr-track")&&window._vrtrack(e.currentTarget.hrefUrl)}function i(){var n,a,i,r,l=CNN.contentModel.pageType,c="no value set",s=c,d=e(),p=jQuery(CNN.Carousel.carouselSelector).first(),u=c,h=c,g=c,_=jQuery(".js-media__video").length,y=CNN.contentModel.env||c,m=CNN.contentModel.analytics&&CNN.contentModel.analytics.showName||c,f=CNN.contentModel.title||c,N=[],b=c,w=c,C=c,v=c,k=c,j=c,T=0,M="";if("undefined"==typeof CNN.contentModel||"undefined"==typeof CNN.contentModel.pageType||"undefined"==typeof CNN.contentModel.sectionName||"section"!==CNN.contentModel.pageType&&"homepage"!==CNN.contentModel.sectionName&&"intl_homepage"!==CNN.contentModel.sectionName||(f=c),"undefined"!=typeof CNN.contentModel&&"undefined"!=typeof CNN.contentModel.layout&&"error"===CNN.contentModel.layout&&(l="error"),p.length)switch(l){case"article":u=p.data("galleryname"),h=p.find("[data-slidename]").first().data("slidename");break;case"gallery":u=f,h=p.find("[data-slidename]").first().data("slidename"),T=1}"undefined"!=typeof CNN.contentModel.analytics&&("undefined"!=typeof CNN.contentModel.analytics.publishDate&&(g=CNN.contentModel.analytics.publishDate,N=CNN.contentModel.analytics.publishDate.split("T")[0].split("-"),3===N.length&&(g=N[0]+"/"+N[1]+"/"+N[2])),b=CNN.contentModel.analytics.author||c,w=CNN.contentModel.analytics.cap_genre||c,C=CNN.contentModel.analytics.cap_franchise||c,v=CNN.contentModel.analytics.cap_mediaType||c,k=CNN.contentModel.analytics.cap_topics||c,j=CNN.contentModel.pageType||c,r=CNN.contentModel.analytics.branding_content_page||c,n=CNN.contentModel.analytics.branding_content_zone||c,a=CNN.contentModel.analytics.branding_content_container||c,i=CNN.contentModel.analytics.branding_content_card||c,"gallery"===j&&"string"==typeof CNN.contentModel.analytics.branding_content_page&&"default"!==CNN.contentModel.analytics.branding_content_page&&(M=CNN.contentModel.analytics.branding_content_page)),CNN.omniture={branding_ad_page:c,branding_ad_zone:c,branding_ad_container:c,branding_ad_card:c,branding_content_page:r,branding_content_zone:n,branding_content_container:a,branding_content_card:i,branding_gallery:M,cap_author:b,cap_content_type:j,cap_genre:w,cap_franchise:C,cap_media_type:v,cap_show_name:m,cap_topic:k,video_opportunity:_,friendly_name:s,full_gallery:T,gallery_name:u,gallery_slide:h,grid_size:d,ireport_assignment:c,headline:f,publish_date:g,rs_flag:y,section:o(CNN.contentModel),template_type:t(l)},"error"===CNN.omniture.template_type&&(CNN.omniture.section=["error",c]),jQuery(document).trigger("cnn-analytics-metadata-added")}function o(e){var t="",n="",a="",i=e,o=e.analytics||{};return a="undefined"!=typeof i.sectionName?i.sectionName:"undefined"!=typeof o.parentPath?o.parentPath.indexOf("/")>-1?o.parentPath.split("/")[1]:o.parentPath:"undefined"!=typeof i.layout&&"search"===i.layout?"search":"no value set",p[a]?(t=p[a].section,n=p[a].subsection||""):(t=a,n=""),[t,n]}function r(){var e=location.href.toLowerCase();window.jsmd=_jsmd.init(),-1===e.indexOf("/.element/ssi/ads.iframes/")&&-1===e.indexOf("/doubleclick/dartiframe.html")&&-1===e.indexOf("/search/")&&(_jsmd.plugin.gQuery("refresh")?jsmd.trackMetrics("dynamic-autoRefresh","autorefresh","cnn-autorefresh"):"gallery"!==CNN.omniture.template_type_content&&jsmd.send())}function l(e){var t=jQuery("nav.nav"),n=jQuery("footer.l-footer"),a=CNN.Analytics.hpt;jQuery(e).find("a").each(function(){var i,o=jQuery(this),r=o.attr("href"),l={};"string"==typeof r&&(l=o.closest(".nav",t).length?o.data("analytics")?a.getHptValues(o,"header"):"string"==typeof e&&e.indexOf("mega-nav")>-1?a.getHptValues(o,"meganav"):a.getHptValues(o,"header"):o.closest(".l-footer",n).length?a.getHptValues(o,"footer"):a.getHptValues(o,"page"),"object"==typeof l&&-1===r.indexOf(l.hptValue)?(i="'hpt="+l.hptValue+";hpt2="+l.hpt2Value+"'",o.attr("onclick","CNN.Analytics.utils.clickEventTracker(event, "+i+")")):"string"==typeof o.data("vr-track")&&r.length>1&&o.attr("onclick","CNN.Analytics.utils.clickEventTracker(event)"))})}function c(){var e=jQuery("a","div.metadata-header__follow-icon"),t=jQuery("div.share-bar-whatsapp-container");e.click(function(){return d(this)}),t.click(function(){var e,t=window.location.href,n=document.querySelector(".share-bar-whatsapp-container").dataset,a=n.url+" "+n.title+" "+n.storyurl,i=document.getElementById("whatsappIframe");return jQuery("html").hasClass("phone")&&(jQuery("html").hasClass("ios")?i.innerHTML='<iframe src="'+a+'"></iframe>':jQuery("html").hasClass("android")&&(e=window.open(a,"whatsappWindow","innerHeight=100,innerWidth=100"),e.blur())),timeout=setTimeout(function(){null!==e&&"object"==typeof e&&e.close(),document.location=t},1e3),window.addEventListener("pagehide",s),d(this)})}function s(){clearTimeout(timeout),timeout=null,window.removeEventListener("pagehide",s)}function d(e){var t=e.getAttribute("data-social-media-name");if("function"==typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: "+t}}})}catch(n){}return!0}var p={videos:{section:"videos"},"watch-cnn":{section:"watch-cnn"},intl_homepage:{section:"cnn homepage",subsection:""},homepage:{section:"cnn homepage",subsection:""},us:{section:"us",subsection:""},world:{section:"world",subsection:""},politics:{section:"politics",subsection:""},tech:{section:"tech",subsection:""},health:{section:"health",subsection:""},entertainment:{section:"entertainment",subsection:""},living:{section:"living",subsection:""},travel:{section:"travel",subsection:""},china:{section:"world",subsection:"china"},africa:{section:"world",subsection:"africa"},americas:{section:"world",subsection:"americas"},asia:{section:"world",subsection:"asia"},europe:{section:"world",subsection:"europe"},middleeast:{section:"world",subsection:"middleeast"},football:{section:"sport",subsection:"football"},motorsport:{section:"sport",subsection:"motorsport"},sailing:{section:"sport",subsection:"sailing"},golf:{section:"sport",subsection:"golf"},tennis:{section:"sport",subsection:"tennis"},horseracing:{section:"sport",subsection:"horseracing"},equestrian:{section:"sport",subsection:"equestrian"},skiing:{section:"sport",subsection:"skiing"}};return CNN.omniture=CNN.omniture||{},{gridSize:e,renamingTemplateType:t,addMetadataObject:i,jsmdTracking:r,addTrackingTags:l,setCookie:n,clickEventTracker:a,addSocialMediaInteractionMetrics:c}}(),CNN.Analytics.hpt=function(){"use strict";function e(e){var t="";return e="undefined"==typeof e?"":e.replace(/^zn-/,""),t=o[e]?o[e]:"no value set"}function t(e){var t="";return e="undefined"==typeof e?"":e.replace(/^cn-/,""),t=i[e]?i[e]:"no value set"}function n(n,a){var i,o={},r="no-value-set",l=r,c=CNN.contentModel.pageType,s=CNN.contentModel.sectionName||r,d=CNN.contentModel.type||r,p=r,u=r,h=r,g=r,_=r,y=r,m=r,f="zone-level",N=[],b=r,w=r,C=r,v=n.closest("[data-analytics]"),k=n.closest("[class^='zn zn-']"),j=n.closest("section.zn"),T=n.closest(".cn"),M=n.closest("[data-analytics-header]"),z=r,Q=r,x=r,O=[],I=CNN.Analytics.utils;return f=n.text().length>0?n.text().toLowerCase():"zone-level",k.length&&"A"!==k[0].tagName&&k[0].className&&(i=k[0].className,"undefined"!=typeof i&&(_=i.split(" ").length>1?i.split(" ")[2]:r)),j.length&&(i=j.data("zone-label"),"undefined"!=typeof i&&i.length&&(g=i),i=j.data("vr-zone"),"undefined"!=typeof i&&i.length&&(y=i)),i=v.length?v.data("analytics"):n[0].className.indexOf("cd-banner")>=0?n.nextAll("[data-analytics]").data("analytics"):void 0,"undefined"!=typeof i&&i.length&&(l=i.split("_"),l=l.length?l:[],b=l[0].length>0?l[0]:r,w=l[1],h=l.length>2?l[2]:r,m=l.length>=4&&l[3].length>0?l[3]:0===n.text().length||n.text().indexOf("<img")>=0?"image":"text"),n.eq(0).text()&&(u=n.eq(0).text(),u=u.replace(/[ ]/g,"-"),u.indexOf("<img")>=0&&(u="image-file")),i=M.data("analytics-header"),"meganav"===a&&"undefined"!=typeof i&&i.split("_").length&&(p="header",O=i.split("_"),O=O.length?O:[],z=O[0].toLowerCase()||r,Q=O[1].toLowerCase()||r,x=O.length>2&&"level3"===O[2]?f.toLowerCase():"zone-level"),i=v.data("analytics"),"header"===a&&"undefined"!=typeof i&&i.split("_").length&&(O=v.data("analytics").split("_"),O=O.length?O:[],p=O.length>0?O[0].toLowerCase():r,z=O.length>1?O[1].toLowerCase():r,Q=O.length>2?O[2].toLowerCase():r,x=r),i=v.data("analytics"),"footer"===a&&"undefined"!=typeof i&&i.split("_").length&&(O=i.split("_"),O=O.length?O:[],1===O.length&&(p="footer",z=O[0].toLowerCase(),Q=r,x=r),2===O.length&&(p=O[0].toLowerCase(),z=O[1].toLowerCase(),Q=r,x=r),3===O.length&&(p=O[0].toLowerCase(),z=O[1].toLowerCase(),Q=O[2].toLowerCase(),x=r)),"page"===a&&T.length&&(i=T[0].className,"undefined"!=typeof i&&(N=i.split(/\s+/),N.length&&(C=N[N.length-1]))),o={linkText:f,hpt_page_pageIndicator:d,hpt_page_gridSize:I.gridSize(),hpt_page_section:s,hpt_page_template:I.renamingTemplateType(c),hpt_page_zoneId:y,hpt_page_zoneLabel:g,hpt_page_containerId:C,hpt_page_containerLabel:b,hpt2_page_pageIndicator:d,hpt2_page_gridSize:I.gridSize(),hpt2_page_section:s,hpt2_page_template:I.renamingTemplateType(c),hpt2_page_zoneId:y,hpt2_page_zoneType:e(_),hpt2_page_containerId:C,hpt2_page_containerType:t(w),hpt_header_globalIndicator:p,hpt_header_gridSize:I.gridSize(),hpt_header_section:s,hpt_header_template:I.renamingTemplateType(c),hpt_header_level1:z,hpt_header_level2:Q,hpt_header_level3:x,hpt_header_linkElement:f,hpt_header_linkType:m,hpt2_header_globalIndicator:p,hpt2_header_gridSize:I.gridSize(),hpt2_header_section:s,hpt2_header_template:I.renamingTemplateType(c),hpt2_header_level1:z,hpt2_header_level2:Q,hpt2_header_level3:x,hpt2_header_linkElement:f,hpt2_header_linkType:m}}function a(e,t){var a=n(e,t),i="",o="";return"page"===t?(i=a.hpt_page_pageIndicator+"_"+a.hpt_page_gridSize+"_"+a.hpt_page_section+"_"+a.hpt_page_template+"_"+a.hpt_page_zoneId+"_"+a.hpt_page_zoneLabel+"_"+a.hpt_page_containerId+"_"+a.hpt_page_containerLabel,o=a.hpt2_page_pageIndicator+"_"+a.hpt2_page_gridSize+"_"+a.hpt2_page_section+"_"+a.hpt2_page_template+"_"+a.hpt2_page_zoneId+"_"+a.hpt2_page_zoneType+"_"+a.hpt2_page_containerId+"_"+a.hpt2_page_containerType):(i=a.hpt_header_globalIndicator+"_"+a.hpt_header_gridSize+"_"+a.hpt_header_section+"_"+a.hpt_header_template+"_"+a.hpt_header_level1+"_"+a.hpt_header_level2+"_"+a.hpt_header_level3+"_"+a.hpt_header_linkElement+"_"+a.hpt_header_linkType,o=a.hpt2_header_globalIndicator+"_"+a.hpt2_header_gridSize+"_"+a.hpt2_header_section+"_"+a.hpt2_header_template+"_"+a.hpt2_header_level1+"_"+a.hpt2_header_level2+"_"+a.hpt2_header_level3+"_"+a.hpt2_header_linkElement+"_"+a.hpt2_header_linkType),i=CNN.Utils.b64Encode(i.replace("…","")),o=CNN.Utils.b64Encode(o.replace("…","")),{hptValue:i,hpt2Value:o}}var i={"list-hierarchical-small-horizontal":"lead+list:lead+headlines-w/images","list-hierarchical-xs":"lead+list:lead+headlines","list-large-horizontal":"list:full-cards","list-large-vertical":"vertical-strip:full-cards","list-small-horizontal":"list:headlines+images","list-small-vertical":"vertical-strip:headlines+images","list-xs":"headlines","grid-medium":"grid:grid(spaced)","grid-small":"grid:grid","stack-large-horizontal":"list:full-cards(spaced)","stack-large-vertical":"vertical-strip:full-cards(spaced)","stack-medium-horizontal":"list:headlines+images(spaced)","stack-medium-vertical":"vertical-strip:headlines+images(spaced)","carousel-large-strip":"carousel:large","carousel-medium-matrix":"carousel:double-deck","carousel-medium-strip":"carousel:standard","stack-ul":"unknown name","section-preview":"unknown name"},o={"left-fluid-right-stack":"hero-3","left-fluid-bg-bleed":"superhero","left-fluid":"priority+2","right-stack-bg-inline":"hero-plus","right-stack-bg-bleed":"full-bleed",staggered:"staggered",balanced:"balanced","60-40":"priority+1","30-70":"grid-right","40-60":"unknown name","70-30":"unknown name",body:"unknown name","single-column":"unknown name","zone-background":"unknown name","zone-banner":"unknown name","zone-header":"unknown name"};return{getHptValues:a}}(),CNN.Gallery.analytics=function(){"use strict";function e(e,t){var n=jQuery(e),a={},i=[],o="",r={},l="",c=!1,s=[],d="",p="",u=1;for(c="boolean"==typeof n.data("is-gallery")?n.data("is-gallery"):!1,a={video:0,article:0,gallery:0,image:0,hyperlink:0,matched:0},jQuery("div.owl-item div[data-analytics]",e).each(function(){var e,t=jQuery(this);e=t.data("analytics").split("_"),s.push(e[2]||""),p=e[1]}),d=s.length>0?s[0]:d;u<s.length;u++)if(s[u]!==d){d="multimedia";break}return"boolean"==typeof t&&t&&(o="owl-nav"===e.className?e.offsetParent.id.split("_")[1]:e.id.split("_")[1],r=document.getElementById("cn-jumbotron-details-container_"+o),jQuery.each(jQuery(r).find(".js-jumbotron-card-wrapper.jumbotron-card-wrapper.active-card"),function(e,t){i=t.firstChild.className.match(/cd\-\-article/),null===i&&(i=t.firstChild.className.match(/cd\-\-(video|image|gallery|hyperlink)/)),null!==i&&(l=i[0].replace("cd--",""))}),jQuery.each(jQuery(r).find("article.cd"),function(e,t){t.className.indexOf("cd--video")>-1?a.video++:t.className.indexOf("cd--article")>-1?a.article++:t.className.indexOf("cd--image")>-1?a.image++:t.className.indexOf("cd--gallery")>-1?a.gallery++:t.className.indexOf("cd--hyperlink")>-1&&a.hyperlink++}),a.video>0&&(d="video",a.matched++),a.article>0&&(d="article",a.matched++),a.image>0&&(d="image",a.matched++),a.hyperlink>0&&(d="hyperlink",a.matched++),a.gallery>0&&(d="gallery",a.matched++),a.matched>1&&(d="multimedia")),d=d.length>0?"carousel_"+d:d,{contentType:d,carouselType:p,isGallery:c}}function t(e){return"undefined"!=typeof jQuery(e).data(d)?jQuery(e).data(d):""}function n(e){var t=-1,n="",a=jQuery(e),i=a.find(p)||[];return t=a.data("active")||"",jQuery.isNumeric(t)&&t>0&&(n=jQuery(i[t-1]).find("img").attr("src"),n="undefined"!=typeof n?n.substring(n.lastIndexOf("/")+1):""),n}function a(e){return"undefined"!=typeof jQuery(e).data(u)?jQuery(e).data(u):""}function i(e){var t=jQuery(e).data("owl.carousel");return t._current-t._clones.length/2+1}function o(o,r){var l={};return l=e(o,r),l.galleryName=t(o),l.galleryType=l.isGallery?"photo gallery":"carousel",l.imageName="carousel"!==l.galleryType?n(o):"",l.slideCount=a(o),l.slideNumber=i(o),"carousel"!==l.galleryType&&(l.carouselType=""),l}function r(e,t){"undefined"!=typeof t.isJumbotron&&t.isJumbotron===!0&&(e.data.page_view=!0,e.data.carousel_type="jumbotron")}function l(e){var t=CNN.CurrentWidth.getClientWidth()*jQuery(window).height(),n=t/2+1,a=e.target.clientWidth*e.target.clientHeight,i=o(e.currentTarget,e.isJumbotron),l=CNN.Analytics.hpt,c=l.getHptValues(jQuery(e.currentTarget),"page"),s={type:"cnngallery-click",data:{page_view:!1,gallery_name:i.galleryName,image_name:i.imageName,content_type:i.contentType,carousel_type:i.carouselType,gallery_type:i.galleryType,gallery_slide_count:i.slideCount,gallery_slide:i.slideNumber,hpt:c.hptValue,hpt2:c.hpt2Value}};s.data.page_view=a>=n?!0:!1,r(s,e),CNN.ads.events.refreshGalleryRailAd(e),null!==window.trackMetrics&&void 0!==window.trackMetrics&&window.trackMetrics(s)}function c(e){jQuery(CNN.Carousel.carouselSelector,e).off("carousel-action-event").on("carousel-action-event",l)}function s(){var e,t,n=0;try{if(t=function(e,t){"undefined"!=typeof t&&t.actionType===CNN.Jumbotron.Constants.CONST_EVENT_CAROUSEL_ACTION_TYPE_CLICK?(e.isJumbotron=!0,l(e)):("click"===e.type||"changed"===e.type||"dragged"===e.type)&&(e.isJumbotron=!0,l(e))},window.cnnJumbotronManager&&window.cnnJumbotronManager.getJumbotrons)for(e=window.cnnJumbotronManager.getJumbotrons();n<e.length;n++)e[n]instanceof CNN.Jumbotron.Container&&"undefined"!=typeof e[n].jumbotronElementRaw&&(jQuery(e[n].jumbotronElementRaw).on("carousel-action-event",t),Modernizr.touch?jQuery(e[n].jumbotronElementRaw).find(".cn-jumbotron-card-details").on(CNN.Carousel.events.changed,t):(jQuery(e[n].jumbotronElementRaw).find(".owl-nav").on("click",t),jQuery(e[n].jumbotronElementRaw).find(".jumbotron-small-carousel").on(CNN.Carousel.events.dragged,t)))}catch(a){console.log("Error caught in initJumbotronTracking: %s",a.message)}}var d="galleryname",p="[data-slidename]",u="slide-count";return{init:c,initJumbotronTracking:s,trackGalleryClick:l}}(),"object"==typeof CNN.contentModel&&CNN.contentModel.lazyLoad?jQuery(document).on("allZonesRenderComplete",function(){"use strict";initAnalytics()}):jQuery(document).ready(function(){"use strict";initAnalytics()}),jQuery(window).on("load",function(){"use strict";window.hasOwnProperty("twttr")&&window.twttr.hasOwnProperty("widgets")&&window.twttr.ready(function(){window.twttr.events.bind("click",twttrWidgetTweetButtonClickHandler)})});
//# sourceMappingURL=cnn-analytics.min.js.map