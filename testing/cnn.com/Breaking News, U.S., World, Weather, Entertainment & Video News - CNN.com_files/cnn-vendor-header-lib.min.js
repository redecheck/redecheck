function amzn_ads(e){"use strict";try{amznads.updateAds(e)}catch(t){try{console.log("amzn_ads: "+t)}catch(n){}}}function aax_write(e,t){e.write(t),e.close()}function aax_render_ad(e){if(e.passback)return void aax_write(document,e.html);var t=e.slotSize;if(!t)return void aax_write(document,e.html);var n=t.indexOf("x"),r=t.substring(0,n),a=t.substring(n+1),i="amznad"+Math.round(1e6*Math.random());aax_write(document,'<iframe id="'+i+'" width="'+r+'" height="'+a+'" src="javascript:\'\'" scrolling="no" frameborder="0" marginwidth="0" marginheight="0" bgcolor="#FFFFFF" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0"></iframe>');var o;try{o=document.getElementById(i);var s=o.contentWindow||o.contentDocument;s.document&&(s=s.document),aax_write(s,e.html)}catch(c){o&&(o.style.display="none")}}window.Modernizr=function(e,t,n){function r(e){v.cssText=e}function a(e,t){return typeof e===t}function i(e,t){return!!~(""+e).indexOf(t)}function o(e,t){for(var r in e){var a=e[r];if(!i(a,"-")&&v[a]!==n)return"pfx"==t?a:!0}return!1}function s(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:a(o,"function")?o.bind(r||t):o}return!1}function c(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+b.join(r+" ")+r).split(" ");return a(t,"string")||a(t,"undefined")?o(i,t):(i=(e+" "+w.join(r+" ")+r).split(" "),s(i,t,n))}var d,l,u,f="2.7.2",p={},g=!0,m=t.documentElement,h="modernizr",y=t.createElement(h),v=y.style,A=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),T="Webkit Moz O ms",b=T.split(" "),w=T.toLowerCase().split(" "),z={},S=[],E=S.slice,C=function(e,n,r,a){var i,o,s,c,d=t.createElement("div"),l=t.body,u=l||t.createElement("body");if(parseInt(r,10))for(;r--;)s=t.createElement("div"),s.id=a?a[r]:h+(r+1),d.appendChild(s);return i=["&#173;",'<style id="s',h,'">',e,"</style>"].join(""),d.id=h,(l?d:u).innerHTML+=i,u.appendChild(d),l||(u.style.background="",u.style.overflow="hidden",c=m.style.overflow,m.style.overflow="hidden",m.appendChild(u)),o=n(d,e),l?d.parentNode.removeChild(d):(u.parentNode.removeChild(u),m.style.overflow=c),!!o},x={}.hasOwnProperty;u=a(x,"undefined")||a(x.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(e,t){return x.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=E.call(arguments,1),r=function(){if(this instanceof r){var a=function(){};a.prototype=t.prototype;var i=new a,o=t.apply(i,n.concat(E.call(arguments)));return Object(o)===o?o:i}return t.apply(e,n.concat(E.call(arguments)))};return r}),z.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:C(["@media (",A.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},z.geolocation=function(){return"geolocation"in navigator},z.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},z.textshadow=function(){return""===t.createElement("div").style.textShadow},z.csscolumns=function(){return c("columnCount")},z.fontface=function(){var e;return C('@font-face {font-family:"font";src:url("https://")}',function(n,r){var a=t.getElementById("smodernizr"),i=a.sheet||a.styleSheet,o=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"";e=/src/i.test(o)&&0===o.indexOf(r.split(" ")[0])}),e},z.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(e){return!1}},z.webworkers=function(){return!!e.Worker};for(var _ in z)u(z,_)&&(l=_.toLowerCase(),p[l]=z[_](),S.push((p[l]?"":"no-")+l));return p.addTest=function(e,t){if("object"==typeof e)for(var r in e)u(e,r)&&p.addTest(r,e[r]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof g&&g&&(m.className+=" "+(t?"":"no-")+e),p[e]=t}return p},r(""),y=d=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function a(e){var t=y[e[m]];return t||(t={},h++,e[m]=h,y[h]=t),t}function i(e,n,r){if(n||(n=t),l)return n.createElement(e);r||(r=a(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():g.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||p.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function o(e,n){if(e||(e=t),l)return e.createDocumentFragment();n=n||a(e);for(var i=n.frag.cloneNode(),o=0,s=r(),c=s.length;c>o;o++)i.createElement(s[o]);return i}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return v.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function c(e){e||(e=t);var r=a(e);return v.shivCSS&&!d&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),l||s(e,r),e}var d,l,u="3.7.0",f=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,g=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",h=0,y={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,l=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){d=!0,l=!0}}();var v={elements:f.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:u,shivCSS:f.shivCSS!==!1,supportsUnknownElements:l,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:c,createElement:i,createDocumentFragment:o};e.html5=v,c(t)}(this,t),p._version=f,p._prefixes=A,p._domPrefixes=w,p._cssomPrefixes=b,p.testProp=function(e){return o([e])},p.testAllProps=c,p.testStyles=C,m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(g?" js "+S.join(" "):""),p}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==h.call(e)}function a(e){return"string"==typeof e}function i(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=y.shift();v=1,e?e.t?g(function(){("c"==e.t?f.injectCss:f.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):v=0}function c(e,n,r,a,i,c,d){function l(t){if(!p&&o(u.readyState)&&(A.r=p=1,!v&&s(),u.onload=u.onreadystatechange=null,t)){"img"!=e&&g(function(){b.removeChild(u)},50);for(var r in C[n])C[n].hasOwnProperty(r)&&C[n][r].onload()}}var d=d||f.errorTimeout,u=t.createElement(e),p=0,h=0,A={t:r,s:n,e:i,a:c,x:d};1===C[n]&&(h=1,C[n]=[]),"object"==e?u.data=n:(u.src=n,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){l.call(this,h)},y.splice(a,0,A),"img"!=e&&(h||2===C[n]?(b.insertBefore(u,T?null:m),g(l,d)):C[n].push(u))}function d(e,t,n,r,i){return v=0,t=t||"j",a(e)?c("c"==t?z:w,e,t,this.i++,n,r,i):(y.splice(this.i++,0,e),1==y.length&&s()),this}function l(){var e=f;return e.loader={load:d,i:0},e}var u,f,p=t.documentElement,g=e.setTimeout,m=t.getElementsByTagName("script")[0],h={}.toString,y=[],v=0,A="MozAppearance"in p.style,T=A&&!!t.createRange().compareNode,b=T?p:m.parentNode,p=e.opera&&"[object Opera]"==h.call(e.opera),p=!!t.attachEvent&&!p,w=A?"object":p?"script":"img",z=p?"script":w,S=Array.isArray||function(e){return"[object Array]"==h.call(e)},E=[],C={},x={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};f=function(e){function t(e){var t,n,r,e=e.split("!"),a=E.length,i=e.pop(),o=e.length,i={url:i,origUrl:i,prefixes:e};for(n=0;o>n;n++)r=e[n].split("="),(t=x[r.shift()])&&(i=t(i,r));for(n=0;a>n;n++)i=E[n](i);return i}function o(e,a,i,o,s){var c=t(e),d=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(a&&(a=r(a)?a:a[e]||a[o]||a[e.split("/").pop().split("?")[0]]),c.instead?c.instead(e,a,i,o,s):(C[c.url]?c.noexec=!0:C[c.url]=1,i.load(c.url,c.forceCSS||!c.forceJS&&"css"==c.url.split(".").pop().split("?").shift()?"c":n,c.noexec,c.attrs,c.timeout),(r(a)||r(d))&&i.load(function(){l(),a&&a(c.origUrl,s,o),d&&d(c.origUrl,s,o),C[c.url]=2})))}function s(e,t){function n(e,n){if(e){if(a(e))n||(u=function(){var e=[].slice.call(arguments);f.apply(this,e),p()}),o(e,u,t,0,d);else if(Object(e)===e)for(c in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(c)&&(!n&&!--s&&(r(u)?u=function(){var e=[].slice.call(arguments);f.apply(this,e),p()}:u[c]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),p()}}(f[c])),o(e[c],u,t,c,d))}else!n&&p()}var s,c,d=!!e.test,l=e.load||e.both,u=e.callback||i,f=u,p=e.complete||i;n(d?e.yep:e.nope,!!l),l&&n(l)}var c,d,u=this.yepnope.loader;if(a(e))o(e,0,u,0);else if(S(e))for(c=0;c<e.length;c++)d=e[c],a(d)?o(d,0,u,0):S(d)?f(d):Object(d)===d&&s(d,u);else Object(e)===e&&s(e,u)},f.addPrefix=function(e,t){x[e]=t},f.addFilter=function(e){E.push(e)},f.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,r,a,c,d){var l,u,p=t.createElement("script"),a=a||f.errorTimeout;p.src=e;for(u in r)p.setAttribute(u,r[u]);n=d?s:n||i,p.onreadystatechange=p.onload=function(){!l&&o(p.readyState)&&(l=1,n(),p.onload=p.onreadystatechange=null)},g(function(){l||(l=1,n(1))},a),c?p.onload():m.parentNode.insertBefore(p,m)},e.yepnope.injectCss=function(e,n,r,a,o,c){var d,a=t.createElement("link"),n=c?s:n||i;a.href=e,a.rel="stylesheet",a.type="text/css";for(d in r)a.setAttribute(d,r[d]);o||(m.parentNode.insertBefore(a,m),g(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("ios",function(){"use strict";return!!navigator.userAgent.match(/(iPod|iPhone|iPad)/i)}),Modernizr.addTest("android",function(){"use strict";return!!navigator.userAgent.match(/android/i)}),Modernizr.addTest("iemobile",function(){"use strict";return!!navigator.userAgent.match(/iemobile/i)}),Modernizr.addTest("flexbox",Modernizr.testAllProps("flexBasis")),Modernizr.addTest("ie8",function(){"use strict";var e,t=-1,n=navigator.userAgent,r=!1;return n.match(/MSIE/i)&&(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1),8===t&&(r=!0))),r}),window.matchMedia||(window.matchMedia=function(){"use strict";var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],r=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),r="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===r.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(e,t,n){"use strict";function r(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t:"function"==typeof define&&define.amd&&define("picturefill",function(){return t}),"object"==typeof e&&(e.picturefill=t)}function a(e){var t,n,r,a,i,c=e||{};t=c.elements||o.getAllElements();for(var d=0,l=t.length;l>d;d++)if(n=t[d],r=n.parentNode,a=void 0,i=void 0,"IMG"===n.nodeName.toUpperCase()&&(n[o.ns]||(n[o.ns]={}),c.reevaluate||!n[o.ns].evaluated)){if(r&&"PICTURE"===r.nodeName.toUpperCase()){if(o.removeVideoShim(r),a=o.getMatch(n,r),a===!1)continue}else a=void 0;(r&&"PICTURE"===r.nodeName.toUpperCase()||!o.sizesSupported&&n.srcset&&s.test(n.srcset))&&o.dodgeSrcset(n),a?(i=o.processSourceSet(a),o.applyBestCandidate(i,n)):(i=o.processSourceSet(n),(void 0===n.srcset||n[o.ns].srcset)&&o.applyBestCandidate(i,n)),n[o.ns].evaluated=!0}}function i(){function n(){var t;e._picturefillWorking||(e._picturefillWorking=!0,e.clearTimeout(t),t=e.setTimeout(function(){a({reevaluate:!0}),e._picturefillWorking=!1},60))}o.initTypeDetects(),a();var r=setInterval(function(){return a(),/^loaded|^i|^c/.test(t.readyState)?void clearInterval(r):void 0},250);e.addEventListener?e.addEventListener("resize",n,!1):e.attachEvent&&e.attachEvent("onresize",n)}if(e.HTMLPictureElement)return void r(function(){});t.createElement("picture");var o=e.picturefill||{},s=/\s+\+?\d+(e\d+)?w/;o.ns="picturefill",function(){o.srcsetSupported="srcset"in n,o.sizesSupported="sizes"in n}(),o.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},o.makeUrl=function(){var e=t.createElement("a");return function(t){return e.href=t,e.href}}(),o.restrictsMixedContent=function(){return"https:"===e.location.protocol},o.matchesMedia=function(t){return e.matchMedia&&e.matchMedia(t).matches},o.getDpr=function(){return e.devicePixelRatio||1},o.getWidthFromLength=function(e){var n;if(!e||e.indexOf("%")>-1!=!1||!(parseFloat(e)>0||e.indexOf("calc(")>-1))return!1;e=e.replace("vw","%"),o.lengthEl||(o.lengthEl=t.createElement("div"),o.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden",o.lengthEl.className="helper-from-picturefill-js"),o.lengthEl.style.width="0px";try{o.lengthEl.style.width=e}catch(r){}return t.body.appendChild(o.lengthEl),n=o.lengthEl.offsetWidth,0>=n&&(n=!1),t.body.removeChild(o.lengthEl),n},o.detectTypeSupport=function(t,n){var r=new e.Image;return r.onerror=function(){o.types[t]=!1,a()},r.onload=function(){o.types[t]=1===r.width,a()},r.src=n,"pending"},o.types=o.types||{},o.initTypeDetects=function(){o.types["image/jpeg"]=!0,o.types["image/gif"]=!0,o.types["image/png"]=!0,o.types["image/svg+xml"]=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),o.types["image/webp"]=o.detectTypeSupport("image/webp","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")},o.verifyTypeSupport=function(e){var t=e.getAttribute("type");if(null===t||""===t)return!0;var n=o.types[t];return"string"==typeof n&&"pending"!==n?(o.types[t]=o.detectTypeSupport(t,n),"pending"):"function"==typeof n?(n(),"pending"):n},o.parseSize=function(e){var t=/(\([^)]+\))?\s*(.+)/g.exec(e);return{media:t&&t[1],length:t&&t[2]}},o.findWidthFromSourceSize=function(n){for(var r,a=o.trim(n).split(/\s*,\s*/),i=0,s=a.length;s>i;i++){var c=a[i],d=o.parseSize(c),l=d.length,u=d.media;if(l&&(!u||o.matchesMedia(u))&&(r=o.getWidthFromLength(l)))break}return r||Math.max(e.innerWidth||0,t.documentElement.clientWidth)},o.parseSrcset=function(e){for(var t=[];""!==e;){e=e.replace(/^\s+/g,"");var n,r=e.search(/\s/g),a=null;if(-1!==r){n=e.slice(0,r);var i=n.slice(-1);if((","===i||""===n)&&(n=n.replace(/,+$/,""),a=""),e=e.slice(r+1),null===a){var o=e.indexOf(",");-1!==o?(a=e.slice(0,o),e=e.slice(o+1)):(a=e,e="")}}else n=e,e="";(n||a)&&t.push({url:n,descriptor:a})}return t},o.parseDescriptor=function(e,t){var n,r=t||"100vw",a=e&&e.replace(/(^\s+|\s+$)/g,""),i=o.findWidthFromSourceSize(r);if(a)for(var s=a.split(" "),c=s.length-1;c>=0;c--){var d=s[c],l=d&&d.slice(d.length-1);if("h"!==l&&"w"!==l||o.sizesSupported){if("x"===l){var u=d&&parseFloat(d,10);n=u&&!isNaN(u)?u:1}}else n=parseFloat(parseInt(d,10)/i)}return n||1},o.getCandidatesFromSourceSet=function(e,t){for(var n=o.parseSrcset(e),r=[],a=0,i=n.length;i>a;a++){var s=n[a];r.push({url:s.url,resolution:o.parseDescriptor(s.descriptor,t)})}return r},o.dodgeSrcset=function(e){e.srcset&&(e[o.ns].srcset=e.srcset,e.srcset="",e.setAttribute("data-pfsrcset",e[o.ns].srcset))},o.processSourceSet=function(e){var t=e.getAttribute("srcset"),n=e.getAttribute("sizes"),r=[];return"IMG"===e.nodeName.toUpperCase()&&e[o.ns]&&e[o.ns].srcset&&(t=e[o.ns].srcset),t&&(r=o.getCandidatesFromSourceSet(t,n)),r},o.backfaceVisibilityFix=function(e){var t=e.style||{},n="webkitBackfaceVisibility"in t,r=t.zoom;n&&(t.zoom=".999",n=e.offsetWidth,t.zoom=r)},o.setIntrinsicSize=function(){var n={},r=function(e,t,n){t&&e.setAttribute("width",parseInt(t/n,10))};return function(a,i){var s;a[o.ns]&&!e.pfStopIntrinsicSize&&(void 0===a[o.ns].dims&&(a[o.ns].dims=a.getAttribute("width")||a.getAttribute("height")),a[o.ns].dims||(i.url in n?r(a,n[i.url],i.resolution):(s=t.createElement("img"),s.onload=function(){if(n[i.url]=s.width,!n[i.url])try{t.body.appendChild(s),n[i.url]=s.width||s.offsetWidth,t.body.removeChild(s)}catch(e){}a.src===i.url&&r(a,n[i.url],i.resolution),a=null,s.onload=null,s=null},s.src=i.url)))}}(),o.applyBestCandidate=function(e,t){var n,r,a;e.sort(o.ascendingSort),r=e.length,a=e[r-1];for(var i=0;r>i;i++)if(n=e[i],n.resolution>=o.getDpr()){a=n;break}a&&(a.url=o.makeUrl(a.url),t.src!==a.url&&(o.restrictsMixedContent()&&"http:"===a.url.substr(0,"http:".length).toLowerCase()?void 0!==window.console&&console.warn("Blocked mixed content image "+a.url):(t.src=a.url,t.currentSrc=t.src,o.backfaceVisibilityFix(t))),o.setIntrinsicSize(t,a))},o.ascendingSort=function(e,t){return e.resolution-t.resolution},o.removeVideoShim=function(e){var t=e.getElementsByTagName("video");if(t.length){for(var n=t[0],r=n.getElementsByTagName("source");r.length;)e.insertBefore(r[0],n);n.parentNode.removeChild(n)}},o.getAllElements=function(){for(var e=[],n=t.getElementsByTagName("img"),r=0,a=n.length;a>r;r++){var i=n[r];("PICTURE"===i.parentNode.nodeName.toUpperCase()||null!==i.getAttribute("srcset")||i[o.ns]&&null!==i[o.ns].srcset)&&e.push(i)}return e},o.getMatch=function(e,t){for(var n,r=t.childNodes,a=0,i=r.length;i>a;a++){var s=r[a];if(1===s.nodeType){if(s===e)return n;if("SOURCE"===s.nodeName.toUpperCase()){null!==s.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var c=s.getAttribute("media");if(s.getAttribute("srcset")&&(!c||o.matchesMedia(c))){var d=o.verifyTypeSupport(s);if(d===!0){n=s;break}if("pending"===d)return!1}}}}return n},i(),a._=o,r(a)}(window,window.document,new window.Image);var amzn_console=function(){"use strict";var e={};return e.log=function(){},e}();window.console&&(amzn_console=window.console);var amznads=function(e,t,n,r){"use strict";function a(r,i,o,s,c,d,l){this.element=r,this.impId=c,this.win=d,this.doc=l,this.start=null,this.end=null,this.area=null,this.cutoff=i,this.cutoffTime=1e3*o,this.focused=null,this.timer=!1,this.timerStarted=!1,this.getDuration=s,this.reported=!1,this.above=null,this.totalTime=0,this.leftPos=null,this.topPos=null,a.prototype.calcArea=function(){try{var r=t.getElementsByTagName("body")[0],a=n.top.innerWidth||t.documentElement.clientWidth||r.clientWidth,i=n.top.innerHeight||t.documentElement.clientHeight||r.clientHeight,o=e.$jQ(n).scrollTop(),s=e.$jQ(this.element).offset().top,c=e.$jQ(this.element).height(),d=e.$jQ(n).scrollLeft(),l=e.$jQ(this.element).offset().left,u=e.$jQ(this.element).width(),f=Math.max(s,o),p=Math.min(s+c,o+i),g=p-f;g=Math.max(0,g);var m=Math.max(l,d),h=Math.min(l+u,d+a),y=h-m;y=Math.max(0,y);var v=g*y,A=u*c;return this.leftPos=l/e.$jQ(t).width(),this.topPos=s/e.$jQ(t).height(),v/A}catch(T){e.log("calcArea failed for ad id="+this.element+"; error="+T)}return 0},a.prototype.displayTime=function(){if(this.getDuration){var t=this.end-this.start;e.log(this.element+" viewed for: "+t),this.totalTime+=t}},a.prototype.adInView=function(){e.log(this.element+" IN VIEW")},a.prototype.adNotInView=function(){e.log(this.element+" NOT IN VIEW")},a.prototype.seenForTime=function(){e.log(this.element+" displayed for "+this.cutoffTime/1e3+" seconds"),e.log(" "),this.reported=!0;try{encodeURIComponent(location.protocol+location.host+location.pathname)}catch(t){this.firePixel('/{"adViewability":[{"error": '+JSON.stringify(encodeURIComponent("Error encoding url - "+t))+"}]}")}try{this.firePixel('/{"adViewability":[{"viewable": true }]}')}catch(t){e.log(t),this.firePixel('/{"adViewability":[{"error": '+JSON.stringify(encodeURIComponent("Error sending pixel - "+t))+"}]}")}},a.prototype.firePixel=function(t){(new Image).src=e.protocol+e.host+e.px_svc+this.impId+t+"&cb="+Math.round(1e7*Math.random())},a.prototype.getAreaTime=function(){function n(){i.reported||(i.timer=setTimeout(function(){i.seenForTime()},i.cutoffTime))}function r(){i.adInView(),i.start=new Date,n(),i.timerStarted=!0}function a(){clearTimeout(i.timer),i.timerStarted=!1,i.end=new Date,i.adNotInView(),i.displayTime()}var i=this;if(null==this.area){this.area=this.calcArea(),this.above=this.area>this.cutoff?!0:!1;try{this.firePixel('/{"adViewability":[{"above_the_fold": '+this.above+', "topPos": '+this.topPos+', "leftPos": '+this.leftPos+"}]}")}catch(o){e.log(o),this.firePixel('/{"adViewability":[{"error": '+JSON.stringify(encodeURIComponent("Error sending pixel - "+o))+"}]}")}}var s=this.calcArea();t.hasFocus()&&(0==this.focused||null==this.focused)&&s>this.cutoff&&0==this.timerStarted&&r(),t.hasFocus()?this.focused=!0:this.area>this.cutoff&&1==this.focused&&(a(),this.focused=!1),(this.area>=this.cutoff&&s<this.cutoff||this.area<this.cutoff&&s>=this.cutoff)&&(s>=this.cutoff&&0==this.timerStarted?r():s<this.area&&a()),this.area=s},a.prototype.collectData=function(){var t=this;t.getAreaTime(),e.$jQ(n).on("scroll resize focus blur",function(){t.reported||t.getAreaTime()})}}var i="https:"===t.location.protocol;return e.protocol=i?"https://":"http://",e.DEFAULT_HOST="aax.amazon-adsystem.com",e.host=e.DEFAULT_HOST,e.dtb_svc="/e/dtb/bid",e.pb_svc="/x/getad",e.px_svc="/x/px/",e.debug_mode=e.debug_mode||!1,e.MIN_TIMEOUT=0,e.DEFAULT_TIMEOUT=1e3,e.targetingKey="amznslots",e.vidKey="amzn_vid",e.tasks=e.tasks||[],e.$jQ=e.$jQ||null,e.VIEWABILITY_CUTOFF_AREA=e.VIEWABILITY_CUTOFF_AREA||.5,e.VIEWABILITY_CUTOFF_DURATION_SEC=e.VIEWABILITY_CUTOFF_DURATION_SEC||1,e.CSM_JS="//c.amazon-adsystem.com/aax2/csm.js.gz",e.isjQueryPresent=function(){if("function"==typeof e.$jQ)return!0;try{if(n.top.jQuery&&n.top.jQuery.fn.on&&n.top.jQuery.fn.scrollTop)return e.$jQ=n.top.jQuery,!0}catch(t){}return!1},e.log=function(t){try{e.debug_mode&&r.log(t)}catch(n){}},e.log("Initiating amznads"),e.ads||(e.ads={}),e.updateAds=function(t){if(e.ads=t.ads,e.ev=t.ev,t.vads){e.ads||(e.ads={});var n;for(n in t.vads)t.vads.hasOwnProperty(n)&&(e.ads[n]=t.vads[n],e.amzn_vid=t.vads[n])}e.log("Updated ads. Executing rest of the task queue"),e.doAllTasks(),e.tasks.push=function(t){e.doTask(t)}},e.saveAds=function(t){e.saved_ads=t.ads,e.updateAds(t)},e.getAdForSlot=function(n,r,a){e.src_id=n;var i=i||{},o=i.u;o||(o=e.getReferrerURL()),o&&-1!==o.indexOf("amzn_debug_mode")&&(e.debug_mode=!0),e.log("amznads.getAdForSlot: Using url="+o);var s="src="+e.src_id+"&slot_uuid="+r+"&c=100&u="+o+"&cb="+Math.round(1e7*Math.random()),c=e.protocol+e.host+e.pb_svc+"?jsd=1&"+s;e.log("amznads.getAdAdForSlot: "+(a?"Async ":"")+"Call to: "+c),a?e.appendScriptTag(c):aax_write(t,"<script type='text/javascript' src='"+c+"'></script>")},e.getAdsCallback=function(t,n,r,a,i){var o=null,i=i||{};try{n&&"function"==typeof n&&(o=e.handleCallBack(n,r))}catch(s){e.log("amznads.getAdsAsyncWithCallback(): Error occured in setting up callback functionality."+s)}i.to||(i.to=r),e.doGetAdsAsync(t,a,i,o)},e.getVideoAdsCallback=function(t,n,r,a,i){var i=i||{};i.mt="V",e.getAdsCallback(t,n,r,a,i)},e.getDisplayAdsCallback=function(t,n,r,a,i){var i=i||{};i.mt="D",e.getAdsCallback(t,n,r,a,i)},e.getAdsAsync=function(t,n,r){e.doGetAdsAsync(t,n,r)},e.getVideoAdsAsync=function(t,n,r){var r=r||{};r.mt="V",e.getAdsAsync(t,n,r)},e.getDisplayAdsAsync=function(t,n,r){var r=r||{};r.mt="D",e.getAdsAsync(t,n,r)},e.handleCallBack=function(t,r){var a=!1,i=null,o=function(e){if(!a){try{t(e),i&&clearTimeout(i)}catch(n){}a=!0}},s=e.getValidMilliseconds(r);return i=s?n.setTimeout(o,s):n.setTimeout(o,e.DEFAULT_TIMEOUT),o},e.getValidMilliseconds=function(t){if(!t)return!1;try{var n=~~Number(t);if(n>e.MIN_TIMEOUT)return n}catch(r){return e.log("amznads.isValidMilliseconds(): Invalid timeout specified."+r),!1}return!1},e.getAds=function(n,r,a,i){if(i)return void e.doGetAdsAsync(n,r,a);var o=e.getScriptSource(n,r,a);e.log("amznads.getAds: Call to: "+o),aax_write(t,"<script type='text/javascript' src='"+o+"'></script>")},e.getVideoAds=function(t,n,r,a){var r=r||{};r.mt="V",e.getAds(t,n,r,a)},e.getDisplayAds=function(t,n,r,a){var r=r||{};r.mt="D",e.getAds(t,n,r,a)},e.doGetAdsAsync=function(t,n,r,a){var i=e.getScriptSource(t,n,r);e.log("amznads.getAds: Async Call to: "+i),e.appendScriptTag(i,a)},e.getScriptSource=function(n,r,a){e.src_id=n;var a=a||{},i=a.u,o=a.d,s=a.to,c=a.mt;if(i||(i=e.getReferrerURL()),i&&-1!==i.indexOf("amzn_debug_mode")&&(e.debug_mode=!0),e.ads&&(e.log("amznads.getAds(): clear out existing ads"),e.clearTargetingFromGPTAsync(),e.ads={}),e.saved_ads&&(e.ads=e.saved_ads),o)try{t.domain=o,e.log("amznads.getAds(): Using domain="+o)}catch(d){e.log("amznads.getAds(): Unable to override document domain with '"+o+"'; exception="+d)}e.log("amznads.getAds(): Using url="+i);var l="src="+n+"&u="+i+"&cb="+Math.round(1e7*Math.random());r&&(l+="&sz="+r),s&&(l+="&t="+s),c&&(l+="&mt="+c);var u=e.protocol+e.host+e.dtb_svc+"?"+l;return u},e.getReferrerURL=function(){var r=encodeURIComponent(t.documentURI);try{r=encodeURIComponent(n.top.location.href),r&&"undefined"!=r||(r=e.detectIframeAndGetURL())}catch(a){r=e.detectIframeAndGetURL()}return r},e.detectIframeAndGetURL=function(){try{if(n.top!==n.self)return e.log("Script is loaded within iFrame"),encodeURIComponent(t.referrer)}catch(r){return encodeURIComponent(t.documentURI)}},e.appendScriptTag=function(n,r){var a=t.getElementsByTagName("script")[0],i=t.createElement("script");i.type="text/javascript",i.async=!0,i.src=n;try{r&&"function"==typeof r&&(i.readyState?(i.onreadystatechange=function(){("loaded"==i.readyState||"complete"==i.readyState)&&(i.onreadystatechange=null,r(!0))},e.log("amznads.appendScriptTag: setting callBack function for < IE-8 ")):(i.onload=function(){r(!0)},e.log("amznads.appendScriptTag: setting callBack function for all other browsers exluding  < IE-8")))}catch(o){e.log("amznads.appendScriptTag: Could not associate callBack function; "+o)}a.parentNode.insertBefore(i,a)},e.renderAd=function(t,n){if(e.log("amznads.renderAd: key="+n+"; ad-tag="+e.ads[n]),e.ads[n]){var r=e.ads[n];if(e.ev){var a="amznad"+Math.round(1e6*Math.random());r=r.replace("window.top.amznads.detectViewability","window.amzncsm.rmD"),r=r.replace(/id=[^ ]*/,'id="'+a+'"');var i="<script type='text/javascript' src='"+e.CSM_JS+"'></script>\n";e.host!=e.DEFAULT_HOST&&(i+="<script type='text/javascript'>try{amzncsm.host=window.top.amznads.host;}catch(e){amzncsm.host=amznads.host;}</script>\n"),r=i+r}aax_write(t,r)}else{var o=new Object;o.c="dtb",o.src=e.src_id,o.kvmismatch=1,o.pubReturnedKey=n,o.aaxReturnedKeys=e.getTokens(),o.cb=Math.round(1e7*Math.random());try{o.u=encodeURIComponent(location.host+location.pathname),navigator&&(o.ua=encodeURIComponent(navigator.userAgent))}catch(s){}var c=encodeURIComponent(JSON.stringify(o)),d=e.protocol+e.host+"/x/px/p/0/"+c;e.log("amznads.renderAd: keyValueMismatch detected, pubReturnedKey="+n+", aaxReturnedKeys="+e.getTokens()),aax_write(t,"<img src='"+d+"'/>")}},e.detectViewability=function(t,r,i,o){e.isjQueryPresent()&&(i===n.top?new a(t,e.VIEWABILITY_CUTOFF_AREA,e.VIEWABILITY_CUTOFF_DURATION_SEC,!0,r,i,o).collectData():new a(i.frameElement,e.VIEWABILITY_CUTOFF_AREA,e.VIEWABILITY_CUTOFF_DURATION_SEC,!0,r,i,o).collectData())},e.hasAds=function(t){var n;if(!t)try{return Object.keys(e.ads).length>0}catch(r){e.log("amznads.hasAds: looks like IE 8 (and below): "+r);for(n in e.ads)if(e.ads.hasOwnProperty(n))return!0}for(n in e.ads)if(e.ads.hasOwnProperty(n)&&n.indexOf(t)>0)return!0;return!1},e.getTargeting=function(){var t={};return e.getTokens()&&e.getTokens().length>0&&(t[e.targetingKey]=e.getTokens(),e.amzn_vid&&(t[e.vidKey]=e.amzn_vid)),t},e.setTargeting=function(t,n){var r;for(r in e.ads)if(e.ads.hasOwnProperty(r)){if(n&&r.indexOf(n)<0)continue;t(r,"1")}},e.setTargetingForGPTAsync=function(t){try{if(t){e.targetingKey=t;var n=e.getTokens();"undefined"!=typeof n&&n.length>0&&googletag.cmd.push(function(){googletag.pubads().setTargeting(t,n),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid)})}else{var r;for(r in e.ads)e.ads.hasOwnProperty(r)&&!function(){var t=r;e.log("amznads.setTargetingForGPTAsync: pushing localKey="+t),googletag.cmd.push(function(){amznads.debug_mode&&amznads.log("amznads.setTargetingForGPTAsync: localKey="+t),googletag.pubads().setTargeting(t,"1"),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid)})}()}e.log("amznads.setTargetingForGPTAsync: Completed successfully. Number of ads returned by Amazon: "+Object.keys(e.ads).length)}catch(a){e.log("amznads.setTargetingForGPTAsync: ERROR - "+a)}},e.setTargetingForGPTSync=function(t){try{if(t){e.targetingKey=t;var n=e.getTokens();"undefined"!=typeof n&&n.length>0&&(googletag.pubads().setTargeting(t,n),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid))}else{var r;for(r in e.ads)e.ads.hasOwnProperty(r)&&(googletag.pubads().setTargeting(r,"1"),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid))}e.log("amznads.setTargetingForGPTSync: Completed successfully. Number of ads returned by Amazon: "+Object.keys(e.ads).length)}catch(a){e.log("amznads.setTargetingForGPTSync: ERROR - "+a)}},e.clearTargetingFromGPTAsync=function(){try{googletag&&googletag.pubads()&&googletag.pubads().clearTargeting(e.targetingKey),googletag.pubads().clearTargeting(e.vidKey)}catch(t){}},e.appendTargetingToAdServerUrl=function(t){var n=t;try{-1===t.indexOf("?")&&(t+="?");var r;for(r in e.ads)e.ads.hasOwnProperty(r)&&(t+="&"+r+"=1");e.log("amznads.appendTargetingToAdServerUrl: Completed successfully. Number of ads returned by Amazon: "+e.ads.length)}catch(a){e.log("amznads.appendTargetingToAdServerUrl: ERROR - "+a)}return e.log("amznads.appendTargetingToAdServerUrl: input url: "+n+"\nreturning url: "+t),t},e.appendTargetingToQueryString=function(t){var n=t;try{var r;for(r in e.ads)e.ads.hasOwnProperty(r)&&(t+="&"+r+"=1")}catch(a){e.log("amznads.appendTargetingToQueryString: ERROR - "+a)}return e.log("amznads.appendTargetingToQueryString: input query-string:"+n+"\nreturning query-string:"+t),t},e.getTokens=function(t){var n,r=[];try{for(n in e.ads)if(e.ads.hasOwnProperty(n)){if(t&&n.indexOf(t)<0)continue;r.push(n)}}catch(a){e.log("amznads.getTokens: ERROR - "+a)}return e.log("amznads.getTokens: returning tokens = "+r),r},e.getKeys=e.getTokens,e.getVid=function(){return e.amzn_vid},e.doAllTasks=function(){for(;e.tasks.length>0;){var t=e.tasks.shift();e.doTask(t)}},e.doTask=function(t){try{t.call()}catch(n){e.log("Failed calling task: "+n)}},e.tryGetAdsAsync=function(){e.asyncParams&&e.getAdsCallback(e.asyncParams.id,e.asyncParams.callbackFn,e.asyncParams.timeout,e.asyncParams.size,e.asyncParams.data)},e}(amznads||{},document,window,amzn_console);amznads.tryGetAdsAsync(),window.amzn_ads=amzn_ads,window.amznads=amznads;var AmazonDirectMatchBuy=function(){function e(e,t){return null!=e&&A.call(e,t)}function t(e){return"[object Function]"===b.call(e)}function n(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function r(e,n){if(!t(e))throw new TypeError("Bind must be called on a function");if(v&&e.bind===v)return v.apply(e,T.call(arguments,1));var r=T.call(arguments,2);return function(){return e.apply(n,r.concat(T.call(arguments)))}}function a(e){return function(){e&&(e.apply(this,arguments),e=null)}}function i(){n(window.console)&&t(window.console.log)&&window.console.log.apply(window.console,arguments)}function o(){return"amznads"in window&&"getTargeting"in window.amznads&&t(window.amznads.getTargeting)
}function s(e){var t=a(e||C);if(!o())return t.call();try{amznads.getAdsCallback(z,t,S)}catch(n){w("Exception thrown while requesting Amazon ads:",n),t.call()}}function c(){var e={};return o()&&(e=amznads.getTargeting(),n(e)||(e={})),e}function d(e){var t=e.getId();if(x.has(t)){var n=x.getKeys(t);if(n.length){w("clearing previous ad key-values: "+n.join(", "));for(var r=0,a=n.length;a>r;++r)e.setAdKeyValue(n[r],null);x.clearKeys(t)}}}function l(e,t,n){w("setting ad key-value: "+t+' = "'+n+'"'),x.addKey(e.getId(),t),e.setAdKeyValue(t,n)}function u(t){var n=c();d(t);for(var r in n)if(e(n,r)){var a=n[r];if(a instanceof Array)for(var i=0,o=a.length;o>i;++i)l(t,a[i],"1");else l(t,r,a)}}function f(e){e.getPlayerType()===CVP.FLASH&&(w("setAdKeyValuePairs(player)"),u(e))}function p(e){E||(w("init(config)",e),E=!0,n(e)&&("amznkey"in e&&(z=e.amznkey),"timeout"in e&&(S=e.timeout)),s(function(){w("init requestAdRefresh responded")}))}function g(e){return function(){return E?void e.apply(this,arguments):void w("ERROR: init() must be called first!")}}var m=Array.prototype,h=Function.prototype,y=Object.prototype,v=h.bind,A=y.hasOwnProperty,T=m.slice,b=y.toString,w=r(i,null,"[AmazonDirectMatchBuy]"),z="3159",S=2e3,E=!1,C=function(){},x=function(){function e(e){return e in a}function t(t,n){e(t)||(a[t]=[]),a[t].push(n)}function n(t){return e(t)?T.call(a[t]):[]}function r(t){return e(t)?(a[t].length=0,!0):!1}var a={};return{has:e,clearKeys:r,getKeys:n,addKey:t}}();return{requestAdRefresh:g(s),getTargetingData:g(c),setAdKeyValuePairs:g(f),isAmazonApiAvailable:o,init:p}}();CNN.AmazonVideoAds=CNN.AmazonVideoAds||{},CNN.AmazonVideoAds.Manager=function(){"use strict";this.initialize=function(){CNN.Features.enableAmazonVideoAds&&"object"==typeof AmazonDirectMatchBuy&&AmazonDirectMatchBuy.init()},this.cvpAdSetup=function(e){CNN.Features.enableAmazonVideoAds&&"object"==typeof AmazonDirectMatchBuy&&(AmazonDirectMatchBuy.setAdKeyValuePairs(window.cnnVideoManager.getPlayerByContainer(e).videoInstance.cvp),AmazonDirectMatchBuy.requestAdRefresh())},this.addAmazonCallback=function(e){"undefined"!=typeof e&&(e.onAdSetup=this.cvpAdSetup)},this.initialize()},CNN.AmazonVideoAds.Manager.getInstance=function(){"use strict";return"undefined"==typeof window.amazonAdManager&&(window.amazonAdManager=new CNN.AmazonVideoAds.Manager),window.amazonAdManager};
//# sourceMappingURL=cnn-vendor-header-lib.min.js.map